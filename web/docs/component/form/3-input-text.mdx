---
title: InputText 文本输入
tags:
  - element
  - atomic
---

<ComponentBrief name="InputText">
  最基础的表单输入域，基于 HTML `<input type="text" />` 的封装。
</ComponentBrief>

## Live Demo

```tsx live
<InputText defaultValue="Hello InputText" />
```

## 何时使用

* 需要接受单行文字输入时

## 组件构成

```text
<div> --------------------------------------------------------------------------- +
| [addonBefore] [prefix] <input /> [status / clear] [count] [suffix] [addonAfter] |
+ -------------------------------------------------------------------------- </div>
```

## 代码演示

### 最简使用

```tsx live
<InputText />
```

### 变体

```tsx live
<>
  <InputText placeholder="variant: undefined" />
  <InputText placeholder="variant: subtle" variant="subtle" />
  <InputText placeholder="variant: underline" variant="underline" />
  <InputText placeholder="variant: transparent" variant="transparent" />
</>
```

### 宽度

默认宽度适应容器，可用 `fluid: false` 或使用 `style`、`className` 进行设置。

```tsx live
<>
  <InputText placeholder="fluid: false" fluid={false} />
  <InputText placeholder="using style" style={{ width: '50%' }} />
</>
```

### 禁用

```tsx live
<InputText defaultValue="disabled" disabled />
```

### 状态

```tsx live
<>
  <InputText defaultValue="loading" status="loading" />
  <InputText defaultValue="error" status="error" />
  <InputText defaultValue="success" status="success" />
</>
```

### 前后扩展

```tsx live
<>
  <InputText {...{
    addonBefore: 'addonBefore',
    addonAfter: 'addonAfter'
  }} />
  <InputText {...{
    addonPrefix: 'http://',
    addonSuffix: '.com'
  }} />
  <InputText {...{
    addonBefore: '💥',
    addonAfter: '☂️',
    addonPrefix: '￥',
    addonSuffix: 'CNY'
  }} />
</>
```

### 清除按钮

```tsx live
<InputText defaultValue="withClear" withClear />
```

### 受控

```tsx live
function DemoControllable(): ReactElement {
  const [stateValue, setStateValue] = useState('');
  const handleNativeInputChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {
    setStateValue(e.target.value);
  }, [setStateValue]);
  
  return <>
    <InputText {...{
      placeholder: '非受控 InputText',
      onChange: setStateValue
    }} />
    <InputText {...{
      placeholder: '受控 InputText 1',
      value: stateValue,
      onChange: setStateValue
    }} />
    <InputText {...{
      placeholder: '受控 InputText 2',
      withClear: true,
      value: stateValue,
      onChange: setStateValue
    }} />
    <input {...{
      placeholder: '原生受控 input',
      value: stateValue,
      onChange: handleNativeInputChange
    }} />
  </>;
}
```

### 字数提示

```tsx live
<>
  <InputText placeholder="count" count />
  <InputText placeholder="maxLength" maxLength={7} />
  <InputText placeholder="maxLength, count: false" maxLength={7} count={false} />
</>
```

### 去除空格

> 默认开启。
>
> 有的组件库这个功能很难用，比如 Fusion，输入的过程中直接去除两头的空格，导致用户无法正常输入 `Hello world`。

```tsx live
function DemoTrim(): ReactElement {
  const [stateValue, setStateValue] = useState('');
  const [stateTime, setStateTime] = useState(0);
  
  const handleChange = useCallback(value => {
    setStateValue(value);
    setStateTime(Date.now());
  }, []);
  
  return <>
    <InputText {...{
      placeholder: '默认 trim',
      value: stateValue,
      onChange: handleChange
    }} />
    <InputText {...{
      placeholder: 'trim: false',
      trim: false,
      value: stateValue,
      onChange: handleChange
    }} />
    <div>value: "<span style={{ whiteSpace: 'pre' }}>{stateValue}</span>" time: {stateTime}</div>
  </>;
}
```

### 中文输入法

> 默认行为。
>
> 中文输入法完成的时候，才触发 `onChange`。

```tsx live
function DemoControllable(): ReactElement {
  const [stateValue, setStateValue] = useState('');
  const handleNativeInputChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {
    setStateValue(e.target.value);
  }, [setStateValue]);
  
  return <>
    <InputText {...{
      placeholder: '受控，输入中文试试',
      value: stateValue,
      onChange: setStateValue
    }} />
    <InputText {...{
      placeholder: '受控，输入中文试试',
      value: stateValue,
      onChange: setStateValue
    }} />
    <input {...{
      placeholder: '原生受控 input，输入中文试试',
      value: stateValue,
      onChange: handleNativeInputChange
    }} />
  </>;
}
```

### Focus & Select

```tsx live
function DemoFocusing(): ReactElement {
  const inputTextRef = useRef<InputTextRef>(null);
  
  return <>
    <div>
      <Button {...{
        label: 'focus',
        onClick: () => inputTextRef.current?.focus()
      }} />
      <Button {...{
        label: 'focus - cursor first',
        onClick: () => inputTextRef.current?.focus({
          cursor: 'start'
        })
      }} />
      <Button {...{
        label: 'focus - cursor last',
        onClick: () => inputTextRef.current?.focus({
          cursor: 'end'
        })
      }} />
      <Button {...{
        label: 'focus - prevent scroll',
        onClick: () => inputTextRef.current?.focus({
          preventScroll: true
        })
      }} />
      <Button {...{
        label: 'select',
        onClick: () => inputTextRef.current?.select()
      }} />
      <Button {...{
        label: 'selectText',
        onClick: () => inputTextRef.current?.selectText(1, 4)
      }} />
      <Button {...{
        label: 'selectText - backward',
        onClick: () => inputTextRef.current?.selectText(1, 4, true)
      }} />
    </div>
    <InputText defaultValue="Kcuf InputText rules" ref={inputTextRef} />
  </>;
}
```

## API Reference

### import

```tsx
import {
  InputText,
  InputTextRef,
  InputTextProps,
  InputTextType
} from 'kcuf-ui';

// 也可单包引入
import InputText, {
  InputTextRef,
  InputTextProps,
  InputTextType
} from '@kcuf-ui/rc-input-text';
```

### Props

支持其所有 [input props](https://react.dev/reference/react-dom/components/input#props)，除了：

* `type`，固定为 `'text'`

| 属性 | 类型 | 说明 |
| --- | --- | --- |
| `addonBefore` | `string \| ReactElement` | 输入框外的前置附加内容 |
| `addonAfter` | `string \| ReactElement` | 输入框外的后置附加内容 |
| `addonPrefix` | `string \| ReactElement` | 输入框内的前置附加内容，可用来显示文字或图表 |
| `addonSuffix` | `string \| ReactElement` | 输入框内的后置附加内容，可用来显示文字或图表 |
| `variant` | `'subtle' \| 'underline' \| 'transparent'` | 变体 |
| `fluid` <TagDefault>false</TagDefault> | `boolean` | 是否占满容器宽度 |
| `round` <TagDefault>false</TagDefault> | `boolean` | 是否两端圆形 |
| `status` | `'loading' \| 'success' \| 'error'` | 加载状态，有 `value` 才展示 |
| `trim` <TagDefault>true</TagDefault> | `boolean` | 是否软 `trim`，即返回 `onChange` 时返回的值两端没有空格 |
| `withClear` <TagDefault>false</TagDefault> | `boolean` | 是否展示清除按钮，有 `value` 且 `status` 为空才展示 |
| `count` <TagDefault>false</TagDefault> | `boolean` | 是否展示字数，若设置 `maxLength` 则默认显示，否则不要显式开启或关闭 |

### Events

| 事件 | 类型 | 说明 |
| --- | --- | --- |
| `onChange` <TagOverride /> | `(value: string, reason: 'input' \| 'composition-end' \| 'clear') => void` | `value` 变化时的回调 |
| `onFocusedChange` | `(focused: boolean) => void` | 可代替 `onFocus/onBlur` |
| `onHoveredChange` | `(hovered: boolean) => void` | 可代替 `onMouseEnter/onMouseLeave` |

### Data Attributes

| 属性 | 说明 |
| --- | --- |
| `[data-disabled]` <TagReadonly /> | Whether the text field is disabled. |
| `[data-invalid]` <TagReadonly /> | Whether the text field is invalid. |
| `[data-readonly]` <TagReadonly /> | Whether the text field is read only. |
| `[data-required]` <TagReadonly /> | Whether the text field is required. |

## FAQ

### 关于命名

> 作为输入器的一种，利用 **前缀命名法** 能够天然集合在一起。

有以下几种命名：

* `Input` 多数选择
* `TextField` 少部分
* `TextInput` 少部分
* `InputText` 只有 [primereact](https://primereact.org/inputswitch) 和 `kcuf-ui`

原生的 [HTML input](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input) 实际上有很多类型，`"text"` 仅仅是最常用的一个。

## 参考

| Lib | 推荐 | 名称 | 归类 | 备注 |
| --- | --- | --- | --- | --- |
| [align](https://www.alignui.com/docs/ui/input) | ★☆ | `Input` | `Form Elements` | |
| [antd](https://ant.design/components/input) | ★★★☆ | `Input` | `Data Entry` | `variant: outlined \| borderless \| filled` |
| [ark](https://ark-ui.com/react/docs/components/field#input) | ★★☆ | `Field.Input` | - | - |
| [atlassian](https://atlassian.design/components/textfield/examples) | ★★★☆ | `TextField` | `Forms and input` | `appearance: subtle \| standard \| none` |
| [baklava](https://baklava.design/?path=/docs/components-input--documentation) | ★★☆ | `Input` | - | |
| [base](https://base.uber.com/6d2425e9f/p/51073e-text-field) | ★☆ | `TextField` | `Input and selection` | |
| [blueprint](https://blueprintjs.com/docs/#core/components/input-group) | ★★☆ | `InputGroup` | `Form Inputs` | |
| [chakra](https://www.chakra-ui.com/docs/components/input) | ★★★★☆ | `Input` | - | `variant: subtle \| outline \| flushed` |
| [daisy](https://daisyui.com/components/input) | ★☆ | `Text input` | `Data input` | |
| [dotui](https://dotui.org/docs/components/inputs/text-field) | ★★☆ | `TextField` | `Inputs` | |
| [element+](https://element-plus.org/zh-CN/component/input.html) | ★☆ | `Input` | `Form` | |
| [eui](https://eui.elastic.co/#/forms/form-controls#text-field) | ★☆ | `FieldText` | `Form Controls` | |
| [fluent](https://fluent2.microsoft.design/components/web/react/switch/usage) | ★ | `Input` | - | |
| [fusion](https://fusion.design/pc/component/input) | ★★★☆ | `Input` | `Data Entry` | - |
| [garden](https://garden.zendesk.com/components/input) | ★★★☆ | `Input` | `Forms` | - |
| [headless](https://headlessui.com/react/input) | ★★★☆ | `Input` | `Forms` | - |
| [hero](https://www.heroui.com/docs/components/input) | ★★★☆ | `Input` | - | `variant: flat \| bordered \| underlined \| faded` |
| [instructure](https://instructure.design/#TextInput) | ★★☆ | `TextInput` | - | |
| [mantine](https://mantine.dev/core/text-input) | ★★★☆ | `TextInput` | `Inputs` | `variant: defult \| filled \| unstyled` |
| [mui](https://mui.com/material-ui/react-text-field) | ★★★☆ | `TextField` | `Inputs` | `variant: outlined \| filled \| standard` |
| [pearl](https://docs.pearl-ui.dev/docs/components/forms/Input) | ★★☆ | `Input` | `Forms` | `variant: filled \| outline` |
| [pluralsight](https://design-system.pluralsight.com/components/textinput) | ★★☆ | `TextInput` | `Inputs` | |
| [primer](https://primer.style/components/text-input) | ★☆ | `TextInput` | - | |
| [primereact](https://primereact.org/inputtext) | ★☆ | `InputText` | `Form` | |
| [radix](https://www.radix-ui.com/themes/docs/components/text-field) | ★★★☆ | `TextField` | | `variant: classic \| surface \| soft` |
| [reakit](https://reakit.io/docs/input) | ☆ | `Input` | - | |
| [semantic](https://semantic-ui.com/elements/input.html) | ★★★ | `Input` | `Elements` | |
| [shadcn](https://ui.shadcn.com/docs/components/input) | ★★ | `Input` | `Elements` | |
| [spectrum](https://spectrum.adobe.com/page/text-field) | ★★★☆ | `TextField` | `Inputs` | `quiet: boolean` |
| [tallstack](https://tallstackui.com/docs/form/input) | ★★ | `Input` | `Form` | |
| [theme](https://theme-ui.com/components/input) | ☆ | `Input` | - | `variant` |
| [tremor](https://tremor.so/docs/inputs/input) | ★☆ | `Input` | `Inputs` | `variant` |