---
title: Icon 图标
tags:
  - element
  - atomic
---

<ComponentBrief name="Icon">
  **kcuf-ui** 内部使用的图标，基于 [IconBase](./icon-base) 封装。如果项目自己需要图标，可使用 IconBase 自行封装。
</ComponentBrief>

## Live Demo

```tsx live
function Demo(): ReactElement {
  const ICONS = [
    '_invalid_type_',
    'loading',
    'arrowhead', 'arrow', 'arrow-to-top', 'triangle',
    'info', 'info-fill', 'help', 'help-fill', 'warn', 'warn-fill', 'success', 'success-fill', 'error', 'error-fill',
    'banned', 'empty', 'close', 'clear', 'copy', 'refresh', 'setting', 'drag', 'search', 'zoom-in', 'zoom-out', 'more',
    'avatar', 'avatar-fill', 'code', 'external'
  ];
  const [stateColored, setCStateColored] = useState<boolean>(true);
  const handleToggleColored = useCallback(() => setCStateColored(prev => !prev), [setCStateColored]);
  
  return <>
    <div>
      {ICONS.map(v => <Icon key={v} type={v} colored={stateColored} />)}
    </div>
    <button onClick={handleToggleColored}>{stateColored ? '✅' : '❌'} colored</button>
  </>;
}
```

## 何时使用

> 仅在 **kcuf-ui** 内部使用。

* 作装饰
* 作按钮（有 `onClick` 时，不需 `button` 包裹，已处理相关 A11Y 的需求）

## 组件构成

```text
<i> ------ +
| ::before |
+ -------</i>
```

## Examples

### 最简使用

```tsx live
<Icon type="setting" />
```

### 加载中 loading

Loading 会自动旋转。

```tsx live
<Icon type="loading" />
```

### 旋转 rotate

旋转图标，适用于箭头等，变化有动效。单位为 °，e.g. `rotate: 90` 表示顺时针旋转 90°，`rotate: -90` 表示逆时针旋转 90°

```tsx live
function DemoRotate(): ReactElement {
  const [stateRotate, setCStateRotate] = useState<number>(90);
  
  return <>
    <Icon type="arrowhead" rotate={stateRotate} />
    <div>
      <input {...{
        type: 'number',
        step: 45,
        value: stateRotate,
        onChange: e => setCStateRotate(Number(e.target.value))
      }} />
    </div>
  </>;
}
```

### 预设颜色 colored

部分按钮有预设颜色，设置 `colored: true` 启用。

```tsx live
<Icon type="info" colored />
```

### 点击 onClick

对 `Icon` 传入 `onClick` 且非 `disabled` 时将自动添加 `role="button"`，并有默认样式 `cursor: pointer`。

使用 `props.rotate` 进行旋转，适用于箭头等，有动画效果。

```tsx live
<Icon type="close" onClick={() => {
  console.info('💥 close clicked');
}} />
```

### 无效类型

如果用 JS 而非 TS 的话，你极有可能漏写或写错 `type`，无效的 `type` 会渲染一个带斜线的方块，以助你尽快在 **运行时** 发现问题。

然而，你用 TS，可以在写代码的时候就发现问题，IDE 会标红，编译会不通过，因此，请写 TS。

```tsx live
<Icon type="l0ading" />
```

## API Reference

### import

```tsx
import {
  Icon,
  IconRef,
  IconProps,
  IconType
} from 'kcuf-ui';

// 也可单包引入
import Icon, {
  IconRef,
  IconProps,
  IconType
} from '@kcuf-ui/rc-icon';
```

| Export | 类型 | 说明 |
| --- | :-: | --- |
| `Icon` | 组件 | |
| `IconRef` | 类型 | `Ref` 类型，指向底层的 `<i>` 元素，二次封装时传递给 `forwardRef` 的类型 |
| `IconProps` | 类型 | 组件 `props` 类型，一般用于二次封装 |
| `IconType` | 类型 | 组件 `type` 的类型<br />`"search" \| "loading" \| "arrowhead" \| "arrow" \| "arrow-to-top" \| "triangle" \| "info" \| "info-fill" \| "help" \| "help-fill" \| "warn" \| "warn-fill" \| "success" \| "success-fill" \| ... 16 more ... \| "external"` |

### Props

`Icon` 的底层 DOM 元素是 `<i>`，支持其所有属性，参考 React 文档 [Common components](https://react.dev/reference/react-dom/components/common)。

| 属性 | 类型 | 说明 |
| --- | --- | --- |
| `type` <TagRequired /> | `IconType` | 类型名，决定图标长什么样。尽量使用语义化的名称，比如 `close` 等。一般来说，一个 `type` 对应一个图标的 code，<br />但出于语义化的考量，不同的 `type` 可以对应到同一个 `code`，比如 ✔ 这样的图标，其 `type` 可以是 `success` 和 `check` |
| `disabled` <TagDefault>false</TagDefault> | `boolean` | 是否为禁用状态 |
| `colored` <TagDefault>false</TagDefault> | `boolean` | 是否展示预设的颜色 |
| `rotate` | `number` | 旋转图标，单位为 °，`rotate: 90` 表示顺时针旋转 90°，`rotate: -90` 表示逆时针旋转 90° |
| `scale` | `number` | 若 rotate 后图标的大小可能不令人满意，可以用它矫正，一般情况下不要用 |

### Events

`Icon` 的底层 DOM 元素是 `<i>`，支持其所有 [鼠标事件](https://react.dev/reference/react-dom/components/common#mouseevent-handler)。

| 事件 | 类型 | 说明 |
| --- | --- | --- |
| `onClick` | `(e: MouseEvent<HTMLSpanElement>) => void` | 为 `Icon` 赋予 `role="button"`、`tabIndex=0` 等额外的按钮特性 |

## Accessibility

作 Button 用，遵循 [ARIA Button Pattern](https://www.w3.org/WAI/ARIA/apg/patterns/button)。

### ARIA

* 作按钮时，`role` 默认为 `Button`，需设置 `aria-label` 或 `title`
* `disabled` 时，自动 [aria-disabled](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-disabled) 为 `"true"`

### 鼠标

* 作按钮时，自动 `cursor: pointer`

### 键盘

| Key | 说明 |
| --- | --- |
| <kbd>Enter</kbd> | `role="button"` 时，触发点击 <TagTodo /> |
| <kbd>Space</kbd> | `role="button"` 时，触发点击 <TagTodo /> |
| <kbd>Tab</kbd> | `role="button"` 时，自动添加 `tabIndex=0`，使其能够被 <kbd>Tab</kbd> focus 到 |

## FAQ

### 如何设置图标大小？

有两种方式：

1. 图标大小默认继承其所在容器的字体大小
2. 为图标单独增加样式

若为图标单独增加样式，方法有很多，以使用 `styled-components` 为例。

```tsx
import styled from 'styled-components';
import {
  Icon
} from 'kcuf-ui';

const ScIcon = styled(Icon)`
  font-size: 16px;
`;

<ScIcon type="..." />
```
