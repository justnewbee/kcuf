---
title: Backdrop 背投
---

<ComponentBrief name="Backdrop">
  一个单例的背投，解决叠加困扰。可用于创建 `Dialog`、浮动面板等场景。
</ComponentBrief>

## Live Demo

```tsx live
function Demo(): ReactElement {
  const [stateVisible, setStateVisible] = useState(false);
  const handleClose = useCallback(() => setStateVisible(false), [setStateVisible]);
  
  return <>
    <InputSwitch {...{
      label: 'show backdrop',
      value: stateVisible,
      onChange: setStateVisible
    }} />
    {stateVisible ? <Backdrop closable onClose={handleClose} />: null}
  </>;
}
```

## 何时使用

* 需要全局遮罩，用来聚焦用户操作区域时
* 需要避免误操时

## Anatomy / 组件构成

```text
<div> ------ +
|            |
+ -------</div>
```

## Examples / 代码演示

### 多个实例不叠加

同时出现多个 `Dialog` 的场景，虽不多见但也不是不可能。如果用 `Dialog` 来做错误提示，噩梦就来了。页面打开的瞬间，一定有不少接口请求，万一这个时候，出错了（这很正常），而弹窗逻辑又没处理单例的情况，就看眼前一黑。

```tsx live
function Demo(): ReactElement {
  const [stateVisible, setStateVisible] = useState(false);
  const handleClose = useCallback(() => setStateVisible(false), [setStateVisible]);
  
  return <>
    <InputSwitch {...{
      label: 'show backdrop',
      value: stateVisible,
      onChange: setStateVisible
    }} />
    {stateVisible ? <>
      <Backdrop closable onClose={handleClose} />
      <Backdrop closable onClose={handleClose} />
      <Backdrop closable onClose={handleClose} />
      <Backdrop closable onClose={handleClose} />
    </>: null}
  </>;
}
```

### zIndex

默认 `z-index` 为 100，如图同时又多个实例，则最大的那个才会真正被渲染。

```tsx live
function Demo(): ReactElement {
  const [stateVisible, setStateVisible] = useState(false);
  const handleClose = useCallback(() => setStateVisible(false), [setStateVisible]);
  
  return <>
    <InputSwitch {...{
      label: 'show backdrop',
      value: stateVisible,
      onChange: setStateVisible
    }} />
    {stateVisible ? <>
      <Backdrop />
      <Backdrop zIndex={12345} closable onClose={handleClose} />
      <Backdrop />
    </>: null}
  </>;
}
```

## API Reference

### import

```tsx
import {
  Backdrop,
  BackdropRef,
  BackdropProps,
  BackdropType
} from 'kcuf-ui';

// 也可单包引入
import Backdrop, {
  BackdropRef,
  BackdropProps,
  BackdropType
} from '@kcuf-ui/rc-backdrop';
```

### Props

| 属性 | 类型 | 说明 |
| --- | --- | --- |
| `zIndex` | `number` | z-index 默认 100 |
| `closable` <TagDefault>false</TagDefault> | `boolean` | 是否点击关闭 |
| `onClose` | `() => void` | 点击关闭的回调，必须 `closable: true` |

### Events

| 事件 | 类型 | 说明 |
| --- | --- | --- |
| `onClose` | `() => void` | - |

### Data Attributes

| 属性 | 说明 |
| --- | --- |
| `[data-backdrop]` <TagReadonly /> | ... |

## Accessibility

### ARIA

### 键盘

### 鼠标

## FAQ

### 关于名字

> 多数库没有为此单独拎一个组件。

有以下几种命名：

* `Backdrop`
* `Overlay`
* `Blanket`
* `Dimmer`

从功能上，`Backdrop` 和 `Overlay` 有相同点，都是为了遮罩，避免误操，但前者是为了突出在其上方的部分，而后者则仅仅是为了遮罩。

没有上方的组件，两者「几乎」等价，区别在于 `Backdrop` 一定是全屏的，而 `Overlay` 可以仅遮罩部分。

另外，有些组件库对 `Overlay` 的理解有误，比如 [Fusion 的 Overlay](https://fusion.design/pc/component/overlay) 其实是 `Popover`。

虽然可能没有独立的 `Backdrop` 组件，但多数组件库对此类型的组件命名是 `Backdrop`，也有叫 `Mask` 的。

## 参考

> 多数库没有为此单独拎一个组件。

| Lib | 推荐 | 名称 | 归类 | 备注 |
| --- | --- | --- | --- | --- |
| [antd](https://ant.design) | - | - | - | `Dialog` 内部 `Mask` |
| [atlassian](https://atlassian.design/components/blanket/examples) | ★★★☆ | `Blanket` | `Overlays and layering` | |
| [baklava](https://baklava.design/?path=/story/components-spinner--overlay-spinner) | ★☆ | `OverlaySpinner` | - | 它能 click-through |
| [franken](https://franken-ui.dev/docs/overlay) | ★☆ | `Overlay` | - | |
| [hero](https://www.heroui.com) | - | - | - | 没有对应的组件，但 [drawer backdrop](https://www.heroui.com/docs/components/drawer\#backdrop) 的三种样式可以看看 |
| [instructure](https://instructure.design/#Overlay) | ★★★ | `Overlay` | - | |
| [ionic](https://ionicframework.com/docs/api/backdrop) | ★☆ | `Backdrop` | - | |
| [mantine](https://mantine.dev/core/overlay) | ★★☆ | `Overlay` | `Overlays` | |
| [mui](https://mui.com/material-ui/react-backdrop) | ★★★☆ | `Backdrop` | `Feedback` | |
| [semantic](https://semantic-ui.com/modules/dimmer.html) | ★☆ | `Dimmer` | - | |
