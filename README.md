# kcuF

## About

**kcuF** `k-kuf`ï¼Œæ˜¯è‘—åçš„ F-word åç€å†™ã€‚

æˆ‘å†™ä»£ç çš„æ—¶å€™ï¼Œç»å¸¸åœ¨å‘½åä¸ŠèŠ±å¾ˆå¤šæ—¶é—´ï¼Œæœ‰çš„æ—¶å€™ï¼Œåœ¨æ²¡æœ‰æƒ³å¥½åˆé€‚çš„åå­—ï¼Œæˆ‘ä¾¿ä¼šç”¨ `f**k`ï¼›å¦å¤–ï¼Œå†™ä¸€äº›ä¸´æ—¶çš„æµ‹è¯•ä»£ç ï¼Œæˆ–è€…æ‰“ä¸´æ—¶çš„ `console` æ—¥å¿—ï¼Œ
æˆ‘ä¹Ÿä¼šç”¨å®ƒã€‚

å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæˆ‘è¿˜ç”¨ jQuery å†™äº†ä¸€ä¸ªå«ä½œ `kcuF` çš„ UI æµ‹è¯•å°å·¥å…·ï¼Œå°±æ˜¯è¿™ä¸ªä»“åº“çš„å‰èº«ï¼Œç›¸å…³çš„ä»£ç è¢«æˆ‘æ‰“åˆ° `archive` è¿™ä¸ª Tag é‡Œäº†ã€‚

æœ€è¿‘æˆ‘æƒ³æŠŠæˆ‘ä¹‹å‰å·¥ä½œä¸­å†™çš„ä¸€äº›éä¸šåŠ¡ç›¸å…³çš„å¼€æºä»£ç ï¼Œæ•´ç†å‡ºæ¥ï¼Œä¸€æ¥æ˜¯å› ä¸ºé‚£éƒ¨åˆ†ä»£ç ä¼°è®¡åˆ«äººä¹Ÿä¸ä¼šå¤ªä¸Šå¿ƒç»§ç»­ç»´æŠ¤å¾—å¾ˆå¥½ï¼ŒäºŒæ¥ä¹Ÿå¯ä»¥è·³è„±å‡ºåŸæœ‰çš„æ€ç»´åœˆå­ï¼Œ
ä»¥ä¸‰æ–¹ä½¿ç”¨è€…çš„è§’åº¦é‡æ–°å®¡è§†å’Œæ”¹å†™ä¹‹å‰æˆ‘å†™çš„é‚£éƒ¨åˆ†ä»£ç ã€‚

## What

è¿™æ˜¯ä¸€ä¸ªåŸºäº pnpm + lerna çš„ Monorepoï¼Œå†…å®¹ä¼šå¾ˆã€Œæ‚ã€ï¼Œå½“ç„¶ï¼Œæˆ‘æœŸæœ›ï¼Œä»¥åæŸäº›ä¸œè¥¿ä¼šç‹¬ç«‹å‡ºå»ã€‚

## How

å¯¹ `package.json` ä¸‹ `scripts` è¯´æ˜ï¼š

| å‘½ä»¤ | è¯´æ˜ |
| --- | --- |
| `boot` | å®‰è£…ä¾èµ–ï¼Œ`git clone` ååšçš„ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œä¹Ÿå¯ä»¥éšä¾¿ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œä¸€èˆ¬ `ncu` æˆ– `pnpm ncu:packages` åï¼Œéœ€è¦ç”¨å®ƒ |
| `boot:packages` | æ„å»ºæ‰€æœ‰çš„ `packages`ï¼Œ`git clone` ååšçš„ç¬¬äºŒä»¶äº‹æƒ…ï¼ˆåç»­å¯ä»¥åªéœ€è¦ `boot`ï¼‰ |
| `clean` | åˆ é™¤æ‰€æœ‰çš„ `node_modules` ç›®å½• |
| `docs:build` | |
| `ncu` | æ£€æŸ¥å¹¶æ›´æ–° `packages.json` ä¾èµ–é¡¹ï¼Œè‹¥æœ‰æ›´æ–°ï¼Œæœ€å¥½è¿è¡Œ `boot` |
| `ncu:packages` | æ£€æŸ¥å¹¶æ›´æ–°æ‰€æœ‰ package çš„ `packages.json` ä¾èµ–é¡¹ï¼Œè‹¥æœ‰æ›´æ–°ï¼Œæœ€å¥½è¿è¡Œ `boot` |
| `depcheck` | æ£€æŸ¥ `packages.json` ä¾èµ–é¡¹æ˜¯å¦æœ‰é—æ¼æˆ–è€…å¤šä½™ |
| `depcheck:packages` | æ£€æŸ¥æ‰€æœ‰ package çš„ `packages.json` ä¾èµ–é¡¹æ˜¯å¦æœ‰é—æ¼æˆ–è€…å¤šä½™ |
| `pub:canary` | æ‰§è¡Œ lerna å‘å¸ƒé‡‘ä¸é›€ç‰ˆæœ¬ |

> ğŸ„ TODO æš‚æ—¶è¿˜æœ‰éƒ¨åˆ† package ä¸èƒ½å¤Ÿè¢«æ„å»ºï¼Œæ‰§è¡Œ `boot:packages` è‹¥å‡ºé”™ï¼Œå¯ä»¥å…ˆæ”¹å¯¹åº”çš„ `pacakge.json`ï¼ŒæŠŠ `scripts.prepublishOnly` å…ˆå–æ¶ˆæ‰ã€‚

## Packages ä¸‹ `package.json` ä¸­çš„å‘½ä»¤

æ‰€æœ‰çš„ package å°½å¯èƒ½éµå¾ªä¸€å®šçš„ä»£ç ç»“æ„ï¼Œ

* `start` å¯ç”¨æœ¬åœ°å¼€å‘ï¼ˆstorybookï¼‰
* `prepublishOnly` æ„å»ºï¼Œåœ¨å‘å¸ƒ npm æ—¶æ‰§è¡Œ
* `build:clean` åˆ é™¤æ„å»ºç›®å½•
* `build:esm` æ„å»º ESM
* `build:cjs` æ„å»º CJS
* `build:types` æ„å»ºç±»å‹
* `build:sb` æ„å»º storybookï¼ˆæš‚æ—¶ç”¨ä¸åˆ°ï¼‰
* `test` æ‰§è¡Œå•æµ‹
* `test:cov` æ‰§è¡Œå•æµ‹ï¼Œå¹¶è®¡ç®—è¦†ç›–ç‡

## TODO

### lerna

æš‚æ—¶åªèƒ½æäº¤ Lock æ–‡ä»¶ï¼Œè§ <https://github.com/lerna/lerna/issues/4066>ã€‚

æœŸæœ›ï¼š

* Npm Scriptï¼š`"boot": "pnpm clean && pnpm i"` â†’ `"boot": "pnpm clean && pnpm i --no-lockfile"`
* `.gitignore`ï¼š+ `*-lock.yaml`
* `lerna.json`ï¼š+ `"npmClientArgs": ["--no-lockfile"]`